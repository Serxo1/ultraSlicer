{"visual":{"name":"GridSlicer","displayName":"Grid Slicer","guid":"GridSlicer_guid_placeholder","visualClassName":"Visual","version":"1.0.0.0","description":"A grid-based slicer for Power BI.","supportUrl":"https://your-support-url.com","gitHubUrl":"https://github.com/your-repo"},"author":{"name":"Your Name","email":"your.email@example.com"},"apiVersion":"5.7.0","style":"style/visual.less","stringResources":{},"capabilities":{"dataRoles":[{"displayName":"Campos de Filtro","name":"category","kind":"Grouping"}],"objects":{"general":{"displayName":"General","properties":{"filter":{"displayName":"Filter","type":{"filter":true}}}},"slicerSettings":{"displayName":"Slicer Settings","properties":{"multiSelect":{"displayName":"Multi-Select","type":{"bool":true}},"singleSelect":{"displayName":"Single-Select","type":{"bool":true}}}},"grid":{"displayName":"Grid Layout","properties":{"flexDirection":{"displayName":"Flex Direction","type":{"text":true}},"justifyContent":{"displayName":"Justify Content","type":{"text":true}}}},"container":{"displayName":"Container","properties":{"backgroundColor":{"displayName":"Background Color","type":{"fill":{"solid":{"color":true}}}},"borderColor":{"displayName":"Border Color","type":{"fill":{"solid":{"color":true}}}},"borderWidth":{"displayName":"Border Width","type":{"numeric":true}},"borderRadius":{"displayName":"Border Radius","type":{"numeric":true}},"padding":{"displayName":"Padding","type":{"numeric":true}},"boxShadow":{"displayName":"Box Shadow","type":{"text":true}}}},"label":{"displayName":"Label","properties":{"color":{"displayName":"Color","type":{"fill":{"solid":{"color":true}}}},"fontSize":{"displayName":"Font Size","type":{"numeric":true}},"fontWeight":{"displayName":"Font Weight","type":{"text":true}},"textAlign":{"displayName":"Text Align","type":{"text":true}}}},"selector":{"displayName":"Selector","properties":{"backgroundColor":{"displayName":"Background Color","type":{"fill":{"solid":{"color":true}}}},"borderColor":{"displayName":"Border Color","type":{"fill":{"solid":{"color":true}}}},"borderWidth":{"displayName":"Border Width","type":{"numeric":true}},"borderRadius":{"displayName":"Border Radius","type":{"numeric":true}},"color":{"displayName":"Color","type":{"fill":{"solid":{"color":true}}}},"fontSize":{"displayName":"Font Size","type":{"numeric":true}}}}},"dataViewMappings":[{"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"window":{"count":30000}}}}}],"privileges":[],"supportsKeyboardFocus":true,"supportsMultiVisualSelection":true,"supportsSynchronizingFilterState":true,"supportsHighlight":true},"content":{"js":"var GridSlicer_guid_placeholder;(()=>{\"use strict\";var e={639:(e,t,a)=>{function o(e,t){return{objectName:e,propertyName:t.name,selector:t.selector,altConstantValueSelector:t.altConstantSelector,instanceKind:t.instanceKind}}function i(e,t,a){return null==t||\"object\"==typeof t&&!t.solid?a:t.solid?{value:null==t?void 0:t.solid.color}:(null==e?void 0:e.items)?e.items.find(e=>e.value==t):t}a.d(t,{D:()=>i,y:()=>o})},667:(e,t,a)=>{a.d(t,{A:()=>o});const o=class{constructor(e){this.localizationManager=e}populateFormattingSettingsModel(e,t){var a,o,i;let s=new e,l=null===(o=null===(a=null==t?void 0:t[0])||void 0===a?void 0:a.metadata)||void 0===o?void 0:o.objects;return l&&(null===(i=s.cards)||void 0===i||i.forEach(e=>{var t,a,o;null===(t=null==e?void 0:e.slices)||void 0===t||t.forEach(t=>{null==t||t.setPropertiesValues(l,e.name)}),null===(o=null===(a=null==e?void 0:e.container)||void 0===a?void 0:a.containerItems)||void 0===o||o.forEach(t=>{var a;null===(a=null==t?void 0:t.slices)||void 0===a||a.forEach(t=>{null==t||t.setPropertiesValues(l,e.name)})})})),s}buildFormattingModel(e){var t;let a={cards:[]};return null===(t=e.cards)||void 0===t||t.forEach(e=>{if(!e)return;const t=e.name,o=e.name+\"-group\";let i={displayName:void 0,slices:[],uid:o},s=e.getFormattingCard(t,i,this.localizationManager);a.cards.push(s);const l={};if(e.container){const a=e.container,n=o+\"-container\",r={displayName:this.localizationManager&&a.displayNameKey?this.localizationManager.getDisplayName(a.displayNameKey):a.displayName,description:this.localizationManager&&a.descriptionKey?this.localizationManager.getDisplayName(a.descriptionKey):a.description,containerItems:[],uid:n};a.containerItems.forEach(e=>{const a=e.displayNameKey?e.displayNameKey:e.displayName,o=n+a;let i={displayName:this.localizationManager&&e.displayNameKey?this.localizationManager.getDisplayName(e.displayNameKey):e.displayName,slices:[],uid:o};this.buildFormattingSlices(e.slices,t,l,s,i.slices),r.containerItems.push(i)}),i.container=r}e.slices&&this.buildFormattingSlices(e.slices,t,l,s,i.slices),s.revertToDefaultDescriptors=this.getRevertToDefaultDescriptor(e)}),a}buildFormattingSlices(e,t,a,o,i){null==e||e.forEach(e=>{let s=null==e?void 0:e.getFormattingSlice(t,this.localizationManager);s&&(void 0===a[e.name]?a[e.name]=0:(a[e.name]++,s.uid=`${s.uid}-${a[e.name]}`),e.topLevelToggle?(s.suppressDisplayName=!0,o.topLevelToggle=s):i.push(s))})}getRevertToDefaultDescriptor(e){var t,a;const o={};let i=[],s=this.getSlicesRevertToDefaultDescriptor(e.name,e.slices,o),l=[];return null===(a=null===(t=e.container)||void 0===t?void 0:t.containerItems)||void 0===a||a.forEach(t=>{l=l.concat(this.getSlicesRevertToDefaultDescriptor(e.name,t.slices,o))}),i=s.concat(l),i}getSlicesRevertToDefaultDescriptor(e,t,a){let o=[];return null==t||t.forEach(t=>{t&&!a[t.name]&&(a[t.name]=!0,o=o.concat(t.getRevertToDefaultDescriptor(e)))}),o}}},674:(e,t,a)=>{a.d(t,{O:()=>i.A,z:()=>o});var o=a(754),i=a(667)},754:(e,t,a)=>{a.d(t,{Kx:()=>s,PA:()=>u,Zp:()=>l,iB:()=>d,jF:()=>r,ks:()=>p,sk:()=>c});var o=a(639);class i{}class s{}class l extends i{getFormattingCard(e,t,a){return{displayName:a&&this.displayNameKey?a.getDisplayName(this.displayNameKey):this.displayName,description:a&&this.descriptionKey?a.getDisplayName(this.descriptionKey):this.description,groups:[t],uid:e,analyticsPane:this.analyticsPane}}}class n extends i{constructor(e){super(),Object.assign(this,e)}getFormattingSlice(e,t){const a=this.type,o=this.name,i={displayName:t&&this.displayNameKey?t.getDisplayName(this.displayNameKey):this.displayName,description:t&&this.descriptionKey?t.getDisplayName(this.descriptionKey):this.description,uid:e+\"-\"+o};return Object.assign(Object.assign({},i),{control:{type:a,properties:this.getFormattingComponent(e,t)}})}getFormattingComponent(e,t){return{descriptor:o.y(e,this),value:this.value}}getRevertToDefaultDescriptor(e){return[{objectName:e,propertyName:this.name}]}setPropertiesValues(e,t){var a;let i=null===(a=null==e?void 0:e[t])||void 0===a?void 0:a[this.name];this.value=o.D(this,i,this.value)}}class r extends n{constructor(e){super(e),this.type=\"ToggleSwitch\"}}class c extends n{constructor(e){super(e),this.type=\"ColorPicker\"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{defaultColor:this.defaultColor,isNoFillItemSupported:this.isNoFillItemSupported})}}class d extends n{constructor(e){super(e),this.type=\"NumUpDown\"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{options:this.options})}}class u extends n{constructor(e){super(e),this.type=\"Dropdown\"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{items:this.items})}}class p extends n{constructor(e){super(e),this.type=\"TextInput\"}getFormattingComponent(e){return Object.assign(Object.assign({},super.getFormattingComponent(e)),{placeholder:this.placeholder})}}},848:(e,t,a)=>{a.d(t,{b:()=>u});var o=a(674);class i extends o.z.Zp{constructor(){super(...arguments),this.multiSelect=new o.z.jF({name:\"multiSelect\",displayName:\"Multi-Select\",value:!0}),this.singleSelect=new o.z.jF({name:\"singleSelect\",displayName:\"Single-Select\",value:!1}),this.name=\"slicerSettings\",this.displayName=\"Slicer Settings\",this.slices=[this.multiSelect,this.singleSelect]}}class s extends o.z.Zp{constructor(){super(...arguments),this.flexDirection=new o.z.PA({name:\"flexDirection\",displayName:\"Direction\",items:[{value:\"row\",displayName:\"Horizontal\"},{value:\"column\",displayName:\"Vertical\"}],value:{value:\"row\",displayName:\"Horizontal\"}}),this.justifyContent=new o.z.PA({name:\"justifyContent\",displayName:\"Justify Content\",items:[{value:\"flex-start\",displayName:\"Start\"},{value:\"center\",displayName:\"Center\"},{value:\"flex-end\",displayName:\"End\"},{value:\"space-between\",displayName:\"Space Between\"},{value:\"space-around\",displayName:\"Space Around\"}],value:{value:\"flex-start\",displayName:\"Start\"}}),this.alignItems=new o.z.PA({name:\"alignItems\",displayName:\"Align Items\",items:[{value:\"flex-start\",displayName:\"Start\"},{value:\"center\",displayName:\"Center\"},{value:\"flex-end\",displayName:\"End\"},{value:\"stretch\",displayName:\"Stretch\"}],value:{value:\"flex-start\",displayName:\"Start\"}}),this.alignContent=new o.z.PA({name:\"alignContent\",displayName:\"Align Content\",items:[{value:\"flex-start\",displayName:\"Start\"},{value:\"center\",displayName:\"Center\"},{value:\"flex-end\",displayName:\"End\"},{value:\"space-between\",displayName:\"Space Between\"},{value:\"space-around\",displayName:\"Space Around\"},{value:\"stretch\",displayName:\"Stretch\"}],value:{value:\"flex-start\",displayName:\"Start\"}}),this.horizontalSpacing=new o.z.iB({name:\"horizontalSpacing\",displayName:\"Horizontal Spacing\",value:5}),this.verticalSpacing=new o.z.iB({name:\"verticalSpacing\",displayName:\"Vertical Spacing\",value:5}),this.name=\"grid\",this.displayName=\"Grid Layout\",this.slices=[this.flexDirection,this.justifyContent,this.alignItems,this.alignContent,this.horizontalSpacing,this.verticalSpacing]}}class l extends o.z.Zp{constructor(){super(...arguments),this.backgroundColor=new o.z.sk({name:\"backgroundColor\",displayName:\"Background Color\",value:{value:\"#FFFFFF\"}}),this.borderColor=new o.z.sk({name:\"borderColor\",displayName:\"Border Color\",value:{value:\"#DDDDDD\"}}),this.borderWidth=new o.z.iB({name:\"borderWidth\",displayName:\"Border Width\",value:1}),this.borderRadius=new o.z.iB({name:\"borderRadius\",displayName:\"Border Radius\",value:5}),this.padding=new o.z.iB({name:\"padding\",displayName:\"Padding\",value:10}),this.shadow=new o.z.ks({name:\"shadow\",displayName:\"Shadow\",value:\"none\",placeholder:\"e.g., 2px 2px 5px #888888\"}),this.flexGrow=new o.z.jF({name:\"flexGrow\",displayName:\"Flex Grow\",value:!1}),this.name=\"container\",this.displayName=\"Container\",this.slices=[this.backgroundColor,this.borderColor,this.borderWidth,this.borderRadius,this.padding,this.shadow,this.flexGrow]}}class n extends o.z.Zp{constructor(){super(...arguments),this.fontColor=new o.z.sk({name:\"fontColor\",displayName:\"Font Color\",value:{value:\"#333333\"}}),this.fontSize=new o.z.iB({name:\"fontSize\",displayName:\"Font Size\",value:14}),this.fontWeight=new o.z.PA({name:\"fontWeight\",displayName:\"Font Weight\",items:[{value:\"normal\",displayName:\"Normal\"},{value:\"bold\",displayName:\"Bold\"}],value:{value:\"bold\",displayName:\"Bold\"}}),this.textAlign=new o.z.PA({name:\"textAlign\",displayName:\"Text Align\",items:[{value:\"left\",displayName:\"Left\"},{value:\"center\",displayName:\"Center\"},{value:\"right\",displayName:\"Right\"}],value:{value:\"left\",displayName:\"Left\"}}),this.name=\"label\",this.displayName=\"Label\",this.slices=[this.fontColor,this.fontSize,this.fontWeight,this.textAlign]}}class r extends o.z.Zp{constructor(){super(...arguments),this.backgroundColor=new o.z.sk({name:\"backgroundColor\",displayName:\"Background Color\",value:{value:\"#FFFFFF\"}}),this.fontColor=new o.z.sk({name:\"fontColor\",displayName:\"Font Color\",value:{value:\"#333333\"}}),this.fontSize=new o.z.iB({name:\"fontSize\",displayName:\"Font Size\",value:12}),this.borderColor=new o.z.sk({name:\"borderColor\",displayName:\"Border Color\",value:{value:\"#CCCCCC\"}}),this.borderWidth=new o.z.iB({name:\"borderWidth\",displayName:\"Border Width\",value:1}),this.borderRadius=new o.z.iB({name:\"borderRadius\",displayName:\"Border Radius\",value:4}),this.height=new o.z.iB({name:\"height\",displayName:\"Height\",value:40}),this.arrowColor=new o.z.sk({name:\"arrowColor\",displayName:\"Arrow Color\",value:{value:\"#666666\"}}),this.name=\"selector\",this.displayName=\"Selector\",this.slices=[this.backgroundColor,this.fontColor,this.fontSize,this.borderColor,this.borderWidth,this.borderRadius,this.height,this.arrowColor]}}class c extends o.z.Zp{constructor(){super(...arguments),this.itemBackgroundColor=new o.z.sk({name:\"itemBackgroundColor\",displayName:\"Item Background\",value:{value:\"#FFFFFF\"}}),this.itemFontColor=new o.z.sk({name:\"itemFontColor\",displayName:\"Item Font Color\",value:{value:\"#333333\"}}),this.itemHoverBackgroundColor=new o.z.sk({name:\"itemHoverBackgroundColor\",displayName:\"Hover Background\",value:{value:\"#e9ecef\"}}),this.itemHoverFontColor=new o.z.sk({name:\"itemHoverFontColor\",displayName:\"Hover Font Color\",value:{value:\"#0056b3\"}}),this.selectedItemBackgroundColor=new o.z.sk({name:\"selectedItemBackgroundColor\",displayName:\"Selected Background\",value:{value:\"#007bff\"}}),this.selectedItemFontColor=new o.z.sk({name:\"selectedItemFontColor\",displayName:\"Selected Font Color\",value:{value:\"#FFFFFF\"}}),this.name=\"dropdown\",this.displayName=\"Dropdown Items\",this.slices=[this.itemBackgroundColor,this.itemFontColor,this.itemHoverBackgroundColor,this.itemHoverFontColor,this.selectedItemBackgroundColor,this.selectedItemFontColor]}}class d extends o.z.Kx{constructor(){super(...arguments),this.slicerSettings=new i,this.grid=new s,this.container=new l,this.label=new n,this.selector=new r,this.dropdown=new c,this.cards=[this.slicerSettings,this.grid,this.container,this.label,this.selector,this.dropdown]}}class u{constructor(e){this.updateThrottleTimeout=null,this.host=e.host,this.selectionManager=this.host.createSelectionManager(),this.formattingSettingsService=new o.O,this.container=document.createElement(\"div\"),this.container.className=\"grid-root\",e.element.appendChild(this.container)}getFormattingModel(){return this.formattingSettingsService.buildFormattingModel(this.formattingSettings)}update(e){var t,a;if(this.formattingSettings=this.formattingSettingsService.populateFormattingSettingsModel(d,e.dataViews),!(null===(t=null==e?void 0:e.dataViews)||void 0===t?void 0:t[0]))return void(this.container.innerHTML=\"\");const o=e.dataViews[0],i=null===(a=o.categorical)||void 0===a?void 0:a.categories;i&&(this.renderDropdown(i,o),this.updateThrottleTimeout&&clearTimeout(this.updateThrottleTimeout),this.updateThrottleTimeout=setTimeout(()=>{this.container.querySelectorAll(\".custom-dropdown\").forEach(e=>{this.updateSelectionUI(e,o)}),this.updateThrottleTimeout=null},50))}renderDropdown(e,t){const a=new Set;this.container.querySelectorAll(\"[data-slicer-name]\").forEach(e=>{a.add(e.getAttribute(\"data-slicer-name\"))});const o=new Set;[...e].sort((e,t)=>e.source.displayName.localeCompare(t.source.displayName)).forEach(e=>{const a=e.source.displayName;o.add(a);let i=this.container.querySelector(`[data-slicer-name=\"${a}\"]`);i?this.applyContainerStyles(i):(i=this.createSlicerContainer(a),this.container.appendChild(i)),this.createDropdownLayout(i,e,t),this.applyLabelStyles(i.querySelector(\".slicer-header\")),this.applySelectorStyles(i.querySelector(\".custom-dropdown\"))}),a.forEach(e=>{if(!o.has(e)){const t=this.container.querySelector(`[data-slicer-name=\"${e}\"]`);t&&this.container.removeChild(t)}}),this.applyGridStyles()}applyGridStyles(){const e=this.formattingSettings.grid;this.container.style.flexDirection=e.flexDirection.value.value,this.container.style.justifyContent=e.justifyContent.value.value,this.container.style.alignItems=e.alignItems.value.value,this.container.style.alignContent=e.alignContent.value.value,this.container.style.gap=`${e.verticalSpacing.value}px ${e.horizontalSpacing.value}px`}createSlicerContainer(e){const t=document.createElement(\"div\");return t.className=\"slicer-container\",t.setAttribute(\"data-slicer-name\",e),this.applyContainerStyles(t),t}applyContainerStyles(e){if(!e)return;const t=this.formattingSettings.container;e.style.backgroundColor=t.backgroundColor.value.value,e.style.border=`${t.borderWidth.value}px solid ${t.borderColor.value.value}`,e.style.borderRadius=`${t.borderRadius.value}px`,e.style.boxShadow=t.shadow.value,e.style.padding=`${t.padding.value}px`,e.style.flexGrow=t.flexGrow.value?\"1\":\"0\"}applyLabelStyles(e){if(!e)return;const t=this.formattingSettings.label;e.style.color=t.fontColor.value.value,e.style.fontSize=`${t.fontSize.value}px`,e.style.fontWeight=t.fontWeight.value.value,e.style.textAlign=t.textAlign.value.value}applySelectorStyles(e){if(!e)return;const t=this.formattingSettings.selector,a=e.querySelector(\".dropdown-header\");a&&(a.style.backgroundColor=t.backgroundColor.value.value,a.style.border=`${t.borderWidth.value}px solid ${t.borderColor.value.value}`,a.style.borderRadius=`${t.borderRadius.value}px`,a.style.height=`${t.height.value}px`);const o=e.querySelector(\".header-text\");o&&(o.style.color=t.fontColor.value.value,o.style.fontSize=`${t.fontSize.value}px`);const i=e.querySelector(\".arrow-down\");i&&(i.style.borderTopColor=t.arrowColor.value.value)}applyDropdownStyles(e){if(!e)return;const t=this.formattingSettings.dropdown;e.style.setProperty(\"--item-bg-color\",t.itemBackgroundColor.value.value),e.style.setProperty(\"--item-font-color\",t.itemFontColor.value.value),e.style.setProperty(\"--item-hover-bg-color\",t.itemHoverBackgroundColor.value.value),e.style.setProperty(\"--item-hover-font-color\",t.itemHoverFontColor.value.value),e.style.setProperty(\"--selected-bg-color\",t.selectedItemBackgroundColor.value.value),e.style.setProperty(\"--selected-font-color\",t.selectedItemFontColor.value.value)}createDropdownLayout(e,t,a){const o=e.querySelector(\".custom-dropdown\");if(o){const e=o.querySelector(\".dropdown-header\"),t=o.querySelector(\".dropdown-list-container\");if(e){const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}t&&t.classList.remove(\"open\")}let i=e.querySelector(\".slicer-header\");i||(i=document.createElement(\"div\"),i.className=\"slicer-header\",e.appendChild(i)),i.textContent=t.source.displayName;let s=e.querySelector(\".custom-dropdown\");s||(s=document.createElement(\"div\"),s.className=\"custom-dropdown\",e.appendChild(s));let l=s.querySelector(\".dropdown-header\");l||(l=document.createElement(\"div\"),l.className=\"dropdown-header\",s.appendChild(l));let n=l.querySelector(\".header-text\");n||(n=document.createElement(\"span\"),n.className=\"header-text\",l.appendChild(n));let r=l.querySelector(\".arrow-down\");r||(r=document.createElement(\"div\"),r.className=\"arrow-down\",l.appendChild(r));let c=s.querySelector(\".dropdown-list-container\");c||(c=document.createElement(\"div\"),c.className=\"dropdown-list-container\",s.appendChild(c)),c.classList.remove(\"open\"),l.onclick=e=>{e.stopPropagation(),c.classList.toggle(\"open\")?document.addEventListener(\"click\",d,!0):document.removeEventListener(\"click\",d,!0)};const d=e=>{s.contains(e.target)||(c.classList.remove(\"open\"),document.removeEventListener(\"click\",d,!0))};this.populateDropdownOptions(c,t,a),this.applyLabelStyles(i),this.applySelectorStyles(s),this.applyDropdownStyles(c)}populateDropdownOptions(e,t,a){e.innerHTML=\"\";const o=document.createElement(\"input\");o.type=\"text\",o.placeholder=\"Buscar opções...\",o.className=\"search-input\",e.appendChild(o);const i=document.createElement(\"div\");i.className=\"virtual-container\",i.style.maxHeight=\"200px\",i.style.overflowY=\"auto\",e.appendChild(i),this.createOption(i,\"Todos\",0,t,a,!0);const s=new Map;let l;t.values.forEach((e,t)=>{let a;if(e instanceof Date){const t=new Date(e);t.setUTCHours(0,0,0,0),a=t.toLocaleDateString()}else a=null!=e&&\"\"!==e?String(e):`Item ${t+1}`;s.has(a)||s.set(a,{value:e,index:t})}),Array.from(s.entries()).sort(([e],[t])=>e.localeCompare(t)).forEach(([e,{value:o,index:s}])=>{this.createOption(i,e,s,t,a,!1)}),o.onkeyup=()=>{clearTimeout(l),l=setTimeout(()=>{const e=o.value.toUpperCase();i.querySelectorAll(\".dropdown-option\").forEach(t=>{const a=t.textContent||\"\";t.style.display=a.toUpperCase().indexOf(e)>-1?\"\":\"none\"})},150)}}createOption(e,t,a,o,i,s){const l=document.createElement(\"div\");l.className=\"dropdown-option\",l.textContent=t;let n=null,r=!1;s?r=0===this.selectionManager.getSelectionIds().length:(n=this.host.createSelectionIdBuilder().withCategory(o,a).createSelectionId(),r=this.selectionManager.getSelectionIds().some(e=>this.compareSelectionIds(e,n))),r&&l.classList.add(\"selected\"),l.onclick=async e=>{e.stopPropagation();const t=this.formattingSettings.slicerSettings.multiSelect.value;try{s?await this.selectionManager.clear():n&&await this.selectionManager.select(n,t),requestAnimationFrame(()=>{this.container.querySelectorAll(\".custom-dropdown\").forEach(e=>{this.updateSelectionUI(e,i)})});const e=this.selectionManager.getSelectionIds();this.host.persistProperties({merge:[{objectName:\"general\",properties:{selection:JSON.stringify(e)},selector:null}]})}catch(e){console.error(\"Erro na seleção:\",e)}},e.appendChild(l)}compareSelectionIds(e,t){try{return JSON.stringify(e)===JSON.stringify(t)||!(!e.key||!t.key)&&e.key===t.key}catch(e){return!1}}updateHeaderText(e,t,a){const o=this.selectionManager.getSelectionIds();if(!o||0===o.length)return void(e.textContent=\"Todos\");if(!a){const o=e.closest(\"[data-slicer-name]\");if(o){const e=o.getAttribute(\"data-slicer-name\");a=t.categorical.categories.find(t=>t.source.displayName===e)}}if(!a)return void(e.textContent=`${o.length} selecionados`);const i=o.filter(e=>{for(let t=0;t<a.values.length;t++){const o=this.host.createSelectionIdBuilder().withCategory(a,t).createSelectionId();if(this.compareSelectionIds(e,o))return!0}return!1});if(0!==i.length)if(1===i.length){const t=i[0];for(let o=0;o<a.values.length;o++){const i=this.host.createSelectionIdBuilder().withCategory(a,o).createSelectionId();if(this.compareSelectionIds(t,i)){let t=a.values[o];return t instanceof Date&&(t=t.toLocaleDateString(\"pt-BR\")),void(e.textContent=String(t))}}e.textContent=\"1 selecionado\"}else e.textContent=`${i.length} selecionados`;else e.textContent=\"Todos\"}updateSelectionUI(e,t){const a=e.closest(\"[data-slicer-name]\");if(!a)return;const o=a.getAttribute(\"data-slicer-name\"),i=t.categorical.categories.find(e=>e.source.displayName===o);if(!i)return;const s=e.querySelector(\".header-text\");s&&this.updateHeaderText(s,t,i);const l=e.querySelectorAll(\".dropdown-option\"),n=this.selectionManager.getSelectionIds(),r=new Set,c=new Set;n.forEach(e=>{let t=!1;for(let a=0;a<i.values.length;a++){const o=this.host.createSelectionIdBuilder().withCategory(i,a).createSelectionId();if(this.compareSelectionIds(e,o)){r.add(a),t=!0;break}}t||c.add(JSON.stringify(e))});const d=new Map;i.values.forEach((e,t)=>{let a;if(e instanceof Date){const t=new Date(e);t.setUTCHours(0,0,0,0),a=t.toLocaleDateString()}else a=null!=e&&\"\"!==e?String(e):`Item ${t+1}`;d.has(a)||d.set(a,t)});const u=new Set;if(0===c.size)for(let e=0;e<i.values.length;e++)u.add(e);else{const e=t.categorical.categories.findIndex(e=>e===i),a=new Map;if(n.forEach(o=>{for(let i=0;i<t.categorical.categories.length;i++){if(i===e)continue;const s=t.categorical.categories[i];for(let e=0;e<s.values.length;e++){const t=this.host.createSelectionIdBuilder().withCategory(s,e).createSelectionId();this.compareSelectionIds(o,t)&&(a.has(i)||a.set(i,new Set),a.get(i).add(e))}}}),a.size>0){const e=Math.min(...t.categorical.categories.map(e=>e.values.length));for(let o=0;o<i.values.length;o++){let s=!1;for(let l=0;l<e;l++){let e=null;l<i.values.length&&(e=i.values[l]);let n=i.values[o],r=!1;if(e===n?r=!0:e&&n&&(r=e instanceof Date&&n instanceof Date?e.getTime()===n.getTime():String(e)===String(n)),!r)continue;let c=!0;for(const[e,o]of a){const a=t.categorical.categories[e];if(l<a.values.length){const e=a.values[l];let t=!1;for(const i of o)if(i<a.values.length){const o=a.values[i];if(e===o){t=!0;break}if(e&&o&&(t=e instanceof Date&&o instanceof Date?e.getTime()===o.getTime():String(e)===String(o),t))break}if(!t){c=!1;break}}}if(c){s=!0;break}}(s||r.has(o))&&u.add(o)}}else for(let e=0;e<i.values.length;e++)u.add(e)}l.forEach(e=>{const t=e.textContent;if(\"Todos\"===t){const t=0===r.size;e.classList.toggle(\"selected\",t),e.style.opacity=\"1\",e.style.pointerEvents=\"auto\"}else{const a=d.get(t);if(void 0!==a){const t=r.has(a),o=u.has(a);e.classList.toggle(\"selected\",t),o||t?(e.style.opacity=\"1\",e.style.pointerEvents=\"auto\"):(e.style.opacity=\"0.4\",e.style.pointerEvents=\"none\")}}})}destroy(){this.updateThrottleTimeout&&(clearTimeout(this.updateThrottleTimeout),this.updateThrottleTimeout=null),this.container.querySelectorAll(\".search-input\").forEach(e=>{e.onkeyup=null}),this.container.innerHTML=\"\"}}}},t={};function a(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return e[o](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var o={};(()=>{a.r(o),a.d(o,{default:()=>s});var e=a(848),t=window.powerbi,i={name:\"GridSlicer_guid_placeholder\",displayName:\"Grid Slicer\",class:\"Visual\",apiVersion:\"5.7.0\",create:t=>{if(e.b)return new e.b(t);throw\"Visual instance not found\"},createModalDialog:(e,t,a)=>{const o=globalThis.dialogRegistry;e in o&&new o[e](t,a)},custom:!0};void 0!==t&&(t.visuals=t.visuals||{},t.visuals.plugins=t.visuals.plugins||{},t.visuals.plugins.GridSlicer_guid_placeholder=i);const s=i})(),GridSlicer_guid_placeholder=o})();","css":"/* Grid Root Container */\n.grid-root {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 16px;\n  padding: 10px;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  overflow-y: auto;\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n}\n.slicer-container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  /* Centraliza o conteúdo verticalmente */\n  width: 230px;\n  /* Largura fixa */\n  height: 80px;\n  /* Altura fixa */\n  margin: 4px;\n  transition: box-shadow 0.2s ease;\n  flex-shrink: 0;\n}\n.slicer-header {\n  margin-bottom: 8px;\n  /* Aumenta o espaço abaixo do header */\n  padding: 4px 0;\n  border-bottom: 1px solid #ccc;\n  /* Default border, can be overridden */\n}\n.custom-dropdown {\n  position: relative;\n  width: 100%;\n}\n.dropdown-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  cursor: pointer;\n  user-select: none;\n  transition: all 0.2s ease;\n  padding: 4px 8px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n}\n.dropdown-header:hover {\n  background-color: #f0f0f0;\n  /* Simple hover effect */\n}\n.dropdown-header .header-text {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.dropdown-header .arrow-down {\n  width: 0;\n  height: 0;\n  border-left: 4px solid transparent;\n  border-right: 4px solid transparent;\n  border-top: 6px solid #666;\n  margin-left: 8px;\n  transition: transform 0.2s ease;\n}\n.dropdown-header.open .arrow-down {\n  transform: rotate(180deg);\n}\n.dropdown-header:active {\n  transform: translateY(1px);\n}\n.dropdown-list-container {\n  position: absolute;\n  top: 100%;\n  left: 0;\n  right: 0;\n  background: white;\n  border: 1px solid #ccc;\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n  z-index: 1000;\n  max-height: 300px;\n  overflow-y: auto;\n  display: none;\n}\n.dropdown-list-container.open {\n  display: block;\n}\n.search-input {\n  width: calc(100% - 24px);\n  padding: 12px;\n  margin: 8px 12px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  outline: none;\n  background-color: #fafafa;\n  transition: all 0.2s ease;\n}\n.search-input:focus {\n  border-color: #007bff;\n  box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);\n}\n.search-input::placeholder {\n  color: #999;\n  font-style: italic;\n}\n/* Container virtualizado para melhor performance */\n.virtual-container {\n  max-height: 200px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n  background: white;\n  /* Otimizações de performance */\n  will-change: scroll-position;\n  transform: translateZ(0);\n  /* Force hardware acceleration */\n  /* Scrollbar personalizada */\n}\n.virtual-container::-webkit-scrollbar {\n  width: 6px;\n}\n.virtual-container::-webkit-scrollbar-track {\n  background: #f1f1f1;\n  border-radius: 3px;\n}\n.virtual-container::-webkit-scrollbar-thumb {\n  background: #c1c1c1;\n  border-radius: 3px;\n}\n.virtual-container::-webkit-scrollbar-thumb:hover {\n  background: #a8a8a8;\n}\n/* Estilos para cross-filtering */\n.dropdown-option {\n  transition: opacity 0.2s ease, color 0.2s ease;\n  /* Estado indisponível (cross-filtering) */\n  /* Estado selecionado sempre visível */\n}\n.dropdown-option[style*=\"opacity: 0.4\"] {\n  color: #999 !important;\n  background-color: #f8f9fa !important;\n  cursor: not-allowed !important;\n}\n.dropdown-option[style*=\"opacity: 0.4\"]:hover {\n  background-color: #f8f9fa !important;\n  color: #999 !important;\n}\n.dropdown-option.selected {\n  opacity: 1 !important;\n  pointer-events: auto !important;\n}\n.options-container {\n  max-height: 200px;\n  overflow-y: auto;\n  padding-right: 5px;\n}\n.dropdown-options {\n  max-height: 150px;\n  overflow-y: auto;\n}\n.dropdown-option {\n  display: flex;\n  align-items: center;\n  padding: 10px 16px;\n  cursor: pointer;\n  border-bottom: 1px solid #f0f0f0;\n  transition: background-color 0.2s ease, color 0.2s ease;\n  background-color: var(--item-bg-color, #FFFFFF);\n  color: var(--item-font-color, #333333);\n}\n.dropdown-option:hover {\n  background-color: var(--item-hover-bg-color, #e9ecef);\n  color: var(--item-hover-font-color, #0056b3);\n}\n.dropdown-option.selected {\n  background-color: var(--selected-bg-color, #007bff);\n  color: var(--selected-font-color, white);\n  font-weight: bold;\n}\n.dropdown-option.not-found-option {\n  font-style: italic;\n  color: #888;\n  background-color: #f9f9f9;\n  cursor: pointer;\n}\n.dropdown-option.not-found-option:hover {\n  background-color: #e9ecef;\n  color: #333;\n}\n.dropdown-option:last-child {\n  border-bottom: none;\n}\n.dropdown-option .real-checkbox,\n.dropdown-option .fake-checkbox {\n  margin-right: 8px;\n}\n.dropdown-option .option-text {\n  flex-grow: 1;\n}\n.arrow-down {\n  width: 0;\n  height: 0;\n  border-left: 5px solid transparent;\n  border-right: 5px solid transparent;\n  border-top: 5px solid;\n  /* Color will be set by JS */\n  margin-left: auto;\n  transition: transform 0.2s;\n}\n.header-text {\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.slicer-item {\n  padding: 8px;\n  text-align: center;\n  cursor: pointer;\n  box-sizing: border-box;\n  transition: background-color 0.2s, border-color 0.2s;\n}\n.slicer-item:hover {\n  border-color: #999;\n}\n.slicer-item.selected {\n  background-color: #a6d7ff;\n  border-color: #0078d4;\n  font-weight: bold;\n}\n\n","iconBase64":"data:image/png;base64,aVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUJBQUFBQVFDQVlBQUFBZjgvOWhBQUFBQVhOU1IwSUFyczRjNlFBQUFBUm5RVTFCQUFDeGp3djhZUVVBQUFBSmNFaFpjd0FBRHNNQUFBN0RBY2R2cUdRQUFBQkZTVVJCVkRoUFkvd1BCQXdVQUNZbzRBOWlGakF4TUl4cUptZ0JxNGE1Z1prWXhZZEJBd1lrWWpIMWdTZ0dYQ2dHalloQjQyQVFEQXdBK2s0Zi83Z1o1UUlBQUFBQVNVVk9SSzVDWUlJPQ=="},"visualEntryPoint":""}